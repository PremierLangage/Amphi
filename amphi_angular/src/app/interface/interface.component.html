<span class="grid-container">

  <div class="head">
    <h2> Amphi </h2>
  </div>

  <!-- CURRENT SLIDE / EXERCICE -->
  <div class="zone1">
    <div class="interface-panel">
      <ng-container *ngIf="selection == null; then currentSlide else currentExo"></ng-container>
      <ng-template #currentSlide>
        <h2> {{ slides[index].title + " " + index }} </h2>
        <p> {{ slides[index].contenu }} </p>
      </ng-template>

      <ng-template #currentExo>
        <ng-container *ngIf="displayStats; then afficheStats else afficheExo"></ng-container>
      </ng-template>
    </div>


    <ng-template #afficheExo>
      <ng-container *ngIf="selection">
        <div class="line bottom-space">
          <div class="spacer"></div>
          <div class="spacer"></div>
          <h3 class="flex"> {{ selection.name }} </h3>
          <div class="spacer"></div>
          <h3 class="flex disabled"> {{ entitled(selection.type) }} </h3>
        </div>
        <h2> {{ selection.question }} </h2>
      </ng-container>
    </ng-template>
  </div>

  <!-- NEXT SLIDE -->
  <div class="zone2">
    <ng-container *ngIf="(0 <= index && index < slides.length-1); else finPresentation">
      <div class="interface-panel disabled">
        <ng-container *ngIf="selection == null; else currentSlide">

          <h2> {{ slides[index+1].title + " " + (index+1) }} </h2>
          <p> {{ slides[index+1].contenu }} </p>
        </ng-container>
      </div>
    </ng-container>
    <ng-template #finPresentation>
      <div class="interface-panel blank">
        <div class="line center"> </div>
        <h2> FIN DE LA PRESENTATION </h2>
      </div>
    </ng-template>
  </div>

  <!-- CONTROLLER -->
  <div class="zone3">
    <div class="interface-panel">
      <ng-container *ngIf="selection == null; else backToSlides">

          <div class="line">
            <!-- bouton gauche -->
            <div class="flex">
              <button [disabled]="(index <= 0)" mat-mini-fab color="basic" (click)="prevSlide()">
                <i class="material-icons"> chevron_left </i>
              </button>
              <span class="button-label" [ngClass]="(index <= 0) ? 'disabled' : ''"> Slide précédente </span>
            </div>
            <!-- space -->
            <div class="spacer"></div>
            <!-- bouton droite -->
            <div class="flex">
              <span class="button-label" [ngClass]="(index >= slides.length -1) ? 'disabled' : ''"> Slide suivante </span>
              <button [disabled]="(index >= slides.length -1)" mat-mini-fab color="basic" (click)="nextSlide()">
                <i class="material-icons"> chevron_right </i>
              </button>
            </div>
        </div>
        <div class="line">
          <div class="spacer"></div>
          <h2 class="flex disabled"> Bienvenue, M. </h2>
          <div style="width: 5px;"></div>
          <h2 class="flex small-caps"> {{ prof_name }}</h2>
          <h2 class="flex disabled"> . </h2>
          <div class="spacer"></div>
        </div>

        <!-- exos -->
        <div class="line">
          <div class="spacer"></div>
          <h3 class="flex disabled"> Vos exercices </h3>
        </div>

        <div class="dark exo-menu">
          <ng-container *ngFor="let exercice of exercices">
            <app-exercice [exercice]="exercice" (click)="displayExercice(exercice)"></app-exercice>
          </ng-container>
        </div>
      </ng-container>

      <!-- boutton retour -->
      <ng-template #backToSlides>
        <div class="line">
          <div class="bottom-space">
            <button mat-mini-fab color="accent" (click)="selection = null">
              <i class="material-icons"> keyboard_return </i>
            </button>
            <span class="button-label">Retour à la présentation</span>
          </div>
        </div>

        <!-- kind select -->
        <div class="menu-container">
          <div class="dark stat-menu">
            <mat-radio-group *ngFor="let chartKind of kinds" [(ngModel)]="kind">
              <div class="line">
                <mat-radio-button (click)="updateKind(chartKind)" [value]="chartKind" [checked]="kind == chartKind">
                  {{ kindName(chartKind) }}
                </mat-radio-button>
                <ng-container *ngIf="chartKind == 1">
                  <mat-slider thumbLabel min="1" max="25" step="1" value="5" [disabled]="kind != 1" (input)="updateStep($event)"></mat-slider>
                </ng-container>
              </div>
            </mat-radio-group>
          </div>

          <!-- stats diffuseur -->
          <mat-slide-toggle color="accent" [(ngModel)]="displayStats">
            Diffuser les statistiques
          </mat-slide-toggle>
        </div>
      </ng-template>
    </div>
  </div>

  <!-- CURRENT EXERCICE STATS -->
  <div class="zone4">
    <div class="interface-panel blank">
      <ng-container *ngIf="selection == null; then aucunExo else afficheStats"></ng-container>
      <ng-template #afficheStats>
        <app-chart-ngx [exercice]= selection></app-chart-ngx>
        <button class="float-left" mat-icon-button color="accent" (click)="refreshStats()">
          <i class="material-icons"> refresh </i>
        </button>
      </ng-template>
    </div>

    <ng-template #aucunExo>
      <div class="center">
        <h2 class="center"> AUCUN EXERCICE EN COURS </h2>
      </div>
    </ng-template>
  </div>
</span>

